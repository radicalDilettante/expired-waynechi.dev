<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="https://waynethebb.github.io/_next/static/css/b1bb8fa9e8f4ae24581f.css" as="style"/><link rel="stylesheet" href="https://waynethebb.github.io/_next/static/css/b1bb8fa9e8f4ae24581f.css" data-n-g=""/><link rel="preload" href="https://waynethebb.github.io/_next/static/css/0f7a990984b2a7be75fd.css" as="style"/><link rel="stylesheet" href="https://waynethebb.github.io/_next/static/css/0f7a990984b2a7be75fd.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="https://waynethebb.github.io/_next/static/chunks/polyfills-e7a279300235e161e32a.js"></script><script src="https://waynethebb.github.io/_next/static/chunks/webpack-44f8ebc2c9169a6ece59.js" defer=""></script><script src="https://waynethebb.github.io/_next/static/chunks/framework-44ddc888f4db0c68c97f.js" defer=""></script><script src="https://waynethebb.github.io/_next/static/chunks/main-e5f07ede970874fa4e5d.js" defer=""></script><script src="https://waynethebb.github.io/_next/static/chunks/pages/_app-c4a924a044e119332578.js" defer=""></script><script src="https://waynethebb.github.io/_next/static/chunks/pages/blog-1c657a1b82091f6ce08d.js" defer=""></script><script src="https://waynethebb.github.io/_next/static/46DxDYLjoUA_-r3WlleeC/_buildManifest.js" defer=""></script><script src="https://waynethebb.github.io/_next/static/46DxDYLjoUA_-r3WlleeC/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="layout_container__1ROar"><header class="header_container__2Vvjg"><h1 class="header_name__2PEvs">Wayne Choi</h1><p class="header_desc__3Cwo2">Web developer &amp; Boat builder</p><ul class="header_list__2sooW"><li class="header_item_list_item__33J-y"><a href="/">HOME</a></li><li class="header_item_list_item__33J-y"><a href="/about">ABOUT</a></li><li class="header_item_list_item_active__3nSjh"><a href="/blog">BLOG</a></li></ul></header><section class="layout_contentsWrapper__3Npc0"><div class="blog_container__4Vikx"><div class="blog_menuIcon__1Rmdk"><img src="https://waynethebb.github.io/images/menu.svg" alt="menu"/></div><div class="blog_postsWrapper__3MpCa"><div class="post_card_container__UhzDn"><p class="post_card_tag__t8NSx"># <!-- -->JavaScript</p><div class="post_card_detail__2vn9C"><h3>Variable declaration in JavaScript Modules</h3><p>In module JavaScript, however, &quot;this&quot; refers to &quot;undefined&quot; in the top level context... </p></div><a class="post_card_link__29JZh" href="/blog/variable_declaration_in_javascript_modules">&gt; Read More</a></div><div class="post_card_container__UhzDn"><p class="post_card_tag__t8NSx"># <!-- -->JS Library</p><div class="post_card_detail__2vn9C"><img src="https://waynethebb.github.io//images/posts/neoquery.png" alt="NeoQuery, the simplified jQuery" class="post_card_img__X1SlI"/><h3>NeoQuery, the simplified jQuery</h3><p>I made a DOM manipulation library, and I was highly motivated from jQuery... </p></div><a class="post_card_link__29JZh" href="/blog/neoquery_the_simplified_jquery">&gt; Read More</a></div></div></div></section><footer class="layout_footer__2KiKH">(C) <!-- -->2021<!-- -->. Wonjun Choi. All rights reserved.</footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"posts":[{"slug":"variable_declaration_in_javascript_modules","title":"Variable declaration in JavaScript Modules","date":"Sep 2, 2021","tag":"JavaScript","excerpt":"In module JavaScript, however, \"this\" refers to \"undefined\" in the top level context... ","content":"\r\nThis study started with only a single line of code I did not understand.\r\n\r\n```javascript\r\n// type = \"module\"\r\nconsole.log(this); // undefined\r\n```\r\n\r\n---\r\n\r\n## Where the hell is \"window\"?\r\n\r\nIn the global execution context (outside of any function), \"this\" refers to the global object. If its runtime environment is a browser, it is \"window\". In module JavaScript, however, \"this\" refers to \"undefined\" in the top level context.\r\n\r\nModules are imported into the scope of single scripts. They cannot be called from global scope.\r\n\r\nModules have a lexical top-level scope. This means that for example, running var foo = 42; within a module does not create a global variable named foo, accessible through window.foo in a browser, although that would be the case in a classic script.\r\n\r\nSimilarly, the this within modules does not refer to the global this, and instead is undefined.\r\n\r\n---\r\n\r\n## Variables Declaration\r\n\r\nAll variables in JavaScript is properties of objects, and a global object is assigned to a property of global object.\r\n\r\n```javascript\r\nvar a = \"hi\";\r\nconsole.log(a); // hi\r\nconsole.log(window.a); // hi\r\nconsole.log(this.a); // hi\r\n```\r\n\r\nWhat object is variables, declared in top-level scope of modules, assigned to?\r\n\r\nWhen variables is declared, it is assigned to a property of LexicalEnvironment component in execution context. In global context, LexicalEnvironment refer the global property. The variables in top-level scope of modules are assigned to LexicalEnvironment like any other execution contexts.\r\n\r\n---\r\n\r\n## \"var\" and \"let\"\r\n\r\nFor both modules and commonjs, variables declared suing the \"let\", and constants are not assigned to a global property, but only LexicalEnvironment.\r\n\r\n```javascript\r\nlet a = \"hi\";\r\nconsole.log(a); // hi\r\nconsole.log(window.a); // undefined\r\nconsole.log(this.a); // undefined\r\n```\r\n\r\n---\r\n\r\n## References\r\n\r\n- [this - JavaScript | MDN](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Operators/this)\r\n- [JavaScript modules - JavaScript | MDN](https://developer.mozilla.org/docs/Web/JavaScript/Guide/Modules)\r\n- [JavaScript modules Â· V8](https://v8.dev/features/modules#mjs)\r\n"},{"slug":"neoquery_the_simplified_jquery","title":"NeoQuery, the simplified jQuery","date":"Sep 1, 2021","tag":"JS Library","excerpt":"I made a DOM manipulation library, and I was highly motivated from jQuery... ","cover_image":"/images/posts/neoquery.png","content":"\r\njQuery, which used to be a market-dominant library, is getting less attention in 2021. It is not an attractive option for new projects anymore, but legacy. Most browsers support web standards, and JavaScript improved a lot with ES6 update. We got fancy api like querySelectorAll() instead of getElementById(), and it is as convenient as jQuery methods.\r\n\r\nIn addition, jQuery is too heavy. In modern JS ecosystem, modularized library is recommend to use. jQuery, however, does have too many features. It helps Dom manipulation, CSS styling, event handling, animation, and ajax. They could be covered with modern JavaScript, or sometimes other modularized library like Axios.\r\n\r\nBut I believe jQuery syntax still works well. Especially its way to manipulate DOM with chaining method is still attractive. So I made a library, which is highly motivated from jQuery, and has similar methods and syntax, to manipulate DOM. It is [NeoQuery.](https://github.com/waynethebb/neoquery)\r\n\r\n---\r\n\r\n## Fluent Interface\r\n\r\nA fluent interface is normally implemented by using method chaining to implement method cascading. jQuery is one of the most representative examples of use.\r\n\r\n```javascript\r\n//jQuery example\r\n$(\"#textNode\").css(\"color\", \"red\").appendTo(\"#someDiv\");\r\n```\r\n\r\nIt is implemented by having each method return the object to which it is attached, often referred to as \"this\". Stated more abstractly, a fluent interface relays the instruction context of a subsequent call in method chaining, where generally the context is\r\n\r\n- Defined through the return value of a called method\r\n- Self-referential, where the new context is equivalent to the last context\r\n- Terminated through the return of a void context\r\n\r\n```javascript\r\nClass Person{\r\n    constructor(){\r\n        this.name;\r\n        this.age;\r\n    }\r\n\r\n    setName(name) {\r\n        this.name = name\r\n        return this\r\n    }\r\n\r\n    setAge(age) {\r\n        this.age = age\r\n        return this\r\n    }\r\n\r\n    sayHi() {\r\n        console.log(`Hi. I am ${this.name}, ${age} years old.`)\r\n        return this\r\n    }\r\n}\r\n\r\nnew Person().setName(\"Wayne\").setAge(\"30\").sayHi();\r\n//\"Hi. I am Wayne, 30 years old.\"\r\n```\r\n\r\nI tried to implement chaining method with similar syntax as jQuery. I didn't export class, but export $() function which create instance of the fluent interface class, and return method of the class.\r\n\r\n```javascript\r\nexport default function $(query) {\r\n  return neoQuery.selectQuery(query);\r\n}\r\n\r\nclass NeoQuery {\r\n  constructor() {\r\n    this.element;\r\n  }\r\n\r\n  selectQuery(query) {\r\n    const newElement = document.querySelectorAll(query);\r\n    this.element = newElement;\r\n    return this;\r\n  }\r\n\r\n  addClass() {\r\n    ...\r\n    this.element = ...\r\n    return this;\r\n  }\r\n\r\n  appendTo(query) {\r\n    ...\r\n    this.element = ...\r\n    return this;\r\n  }\r\n  ...\r\n}\r\n\r\n$(\"#textNode\").addClass(\"myClass\").appendTo(\"#someDiv\");\r\n```\r\n\r\n---\r\n\r\n## $()\r\n\r\nThe function, $(), is to create new instance, and start chaining methods. It has three features.\r\n\r\n```javascript\r\n$(callback);\r\n// Binds a function to be executed when the DOM has finished loading.\r\n// It doesn't chain methods.\r\n// ex) $(()=\u003e{console.log(\"ready\")})\r\n\r\n$(selector);\r\n// Selects DOM elements with a CSS selector\r\n// ex) $( \"div.foo\" ).---\r\n\r\n$(html);\r\n//Creates DOM elements from the provided string of raw HTML.\r\n// ex) $(\"\u003cdiv\u003etest\u003c/div\u003e\").---\r\n```\r\n\r\n---\r\n\r\n## Methods\r\n\r\nI made all methods (except $()), have only one feature. It is to avoid unnecessary logic to categorize arguments for running different feature in one methods, and has more intuitive interface.\r\n\r\n```javascript\r\n// jQuery\r\nattr(attributeName); // Get the value of attributes\r\nattr(attributeName, value); // Set attributes\r\n\r\n// neoQuery\r\nattr(attributeName); // Get the value of an attributes\r\naddAttr(attributeName, value); // Set attributes\r\n```\r\n\r\n---\r\n\r\n## Other features\r\n\r\nI didn't create ajax and animation features, and minimize styling and event handling features. I intended to make this library as light as possible.\r\n\r\n### Styling\r\n\r\n- addCss(propertyName, value)\r\n- removeCss(propertyName)\r\n- show()\r\n- hide()\r\n\r\nI believe in-line styling need to be rejected, so I did not implement other styling methods. Unlike jQuery, those method can get only one property name as an argument.(\"css()\" the jQuery method can get object for css properties)\r\n\r\n\"show()\" and \"hide()\" methods was only exception. I think those methods are more like DOM control, and it does not conflict against other style properties.\r\n\r\n### Event\r\n\r\n- on(event, callback)\r\n- one(event, callback)\r\n- off(event, callback)\r\n\r\nI did not make other features to create event listener, but methods we can use with the browser event types.\r\n\r\n---\r\n\r\n## References\r\n\r\n- [\"jQuery: The write less, do more, JavaScript library\"](http://jquery.com/)\r\n- [Martin Fowler, \"FluentInterface\"](https://www.martinfowler.com/bliki/FluentInterface.html)\r\n"}]},"__N_SSG":true},"page":"/blog","query":{},"buildId":"46DxDYLjoUA_-r3WlleeC","assetPrefix":"https://waynethebb.github.io","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>