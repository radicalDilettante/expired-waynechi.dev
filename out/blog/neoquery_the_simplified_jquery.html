<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="https://waynethebb.github.io/_next/static/css/b1bb8fa9e8f4ae24581f.css" as="style"/><link rel="stylesheet" href="https://waynethebb.github.io/_next/static/css/b1bb8fa9e8f4ae24581f.css" data-n-g=""/><link rel="preload" href="https://waynethebb.github.io/_next/static/css/38a4b6f7570fee24e93f.css" as="style"/><link rel="stylesheet" href="https://waynethebb.github.io/_next/static/css/38a4b6f7570fee24e93f.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="https://waynethebb.github.io/_next/static/chunks/polyfills-e7a279300235e161e32a.js"></script><script src="https://waynethebb.github.io/_next/static/chunks/webpack-44f8ebc2c9169a6ece59.js" defer=""></script><script src="https://waynethebb.github.io/_next/static/chunks/framework-44ddc888f4db0c68c97f.js" defer=""></script><script src="https://waynethebb.github.io/_next/static/chunks/main-e5f07ede970874fa4e5d.js" defer=""></script><script src="https://waynethebb.github.io/_next/static/chunks/pages/_app-90e39a03d0191b8ff742.js" defer=""></script><script src="https://waynethebb.github.io/_next/static/chunks/792-7d66d13204f9e0b4b42d.js" defer=""></script><script src="https://waynethebb.github.io/_next/static/chunks/pages/blog/%5Bslug%5D-b9c429ab487548848ab6.js" defer=""></script><script src="https://waynethebb.github.io/_next/static/sLsnVHm4E6bG3kHgTY_x-/_buildManifest.js" defer=""></script><script src="https://waynethebb.github.io/_next/static/sLsnVHm4E6bG3kHgTY_x-/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="layout_container__1ROar"><header class="header_container__2Vvjg"><h1 class="header_name__2PEvs">Wayne Choi</h1><p class="header_desc__3Cwo2">Web developer &amp; Boat builder</p><ul class="header_list__2sooW"><li class="header_item_list_item__33J-y"><a href="/">HOME</a></li><li class="header_item_list_item__33J-y"><a href="/about">ABOUT</a></li><li class="header_item_list_item__33J-y"><a href="/blog">BLOG</a></li><li class="header_item_list_item__33J-y"><a href="/work">WORK</a></li></ul></header><section class="layout_contentsWrapper__3Npc0"><div class="post_container__3sy9-"><img src="https://waynethebb.github.io//images/posts/neoquery.png" class="post_img__Q7UJV" alt="NeoQuery, the simplified jQuery"/><h1>NeoQuery, the simplified jQuery</h1>
<p>jQuery, which used to be a market-dominant library, is getting less attention in 2021. It is not an attractive option for new projects anymore, but legacy. Most browsers support web standards, and JavaScript improved a lot with ES6 update. We got fancy api like querySelectorAll() instead of getElementById(), and it is as convenient as jQuery methods.</p>
<p>In addition, jQuery is too heavy. In modern JS ecosystem, modularized library is recommend to use. jQuery, however, does have too many features. It helps Dom manipulation, CSS styling, event handling, animation, and ajax. They could be covered with modern JavaScript, or sometimes other modularized library like Axios.</p>
<p>But I still like jQuery syntax. Especially its way to manipulate DOM with chaining method is still attractive. So I made a library for DOM manipulation with jQuery method. I didn&#x27;t create ajax and animation features, and minimize styling and event handling features. It is NeoQuery.</p>
<hr/>
<h2>Fluent Interface</h2>
<p>A fluent interface is normally implemented by using method chaining to implement method cascading. jQuery is one of the most representative examples of use.</p>
<pre><div style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-javascript" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">//jQuery example</span><span>
</span><span></span><span class="token" style="color:#DD4A68">$</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;#textNode&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">css</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;color&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;red&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">appendTo</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;#someDiv&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span></code></div></pre>
<p>It is implemented by having each method return the object to which it is attached, often referred to as &quot;this&quot;. Stated more abstractly, a fluent interface relays the instruction context of a subsequent call in method chaining, where generally the context is</p>
<ul>
<li>Defined through the return value of a called method</li>
<li>Self-referential, where the new context is equivalent to the last context</li>
<li>Terminated through the return of a void context</li>
</ul>
<pre><div style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-javascript" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token maybe-class-name">Class</span><span> </span><span class="token maybe-class-name">Person</span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">constructor</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">name</span><span class="token" style="color:#999">;</span><span>
</span><span>        </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">age</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span>    </span><span class="token" style="color:#DD4A68">setName</span><span class="token" style="color:#999">(</span><span class="token parameter">name</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">name</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> name
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#07a">this</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span>    </span><span class="token" style="color:#DD4A68">setAge</span><span class="token" style="color:#999">(</span><span class="token parameter">age</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">age</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> age
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#07a">this</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span>    </span><span class="token" style="color:#DD4A68">sayHi</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token console" style="color:#DD4A68">console</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">log</span><span class="token" style="color:#999">(</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">Hi. I am </span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">${</span><span class="token template-string interpolation" style="color:#07a">this</span><span class="token template-string interpolation" style="color:#999">.</span><span class="token template-string interpolation property-access">name</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">}</span><span class="token template-string" style="color:#690">, </span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">${</span><span class="token template-string interpolation">age</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">}</span><span class="token template-string" style="color:#690"> years old.</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">)</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#07a">this</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">new</span><span> </span><span class="token" style="color:#DD4A68">Person</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">setName</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;Wayne&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">setAge</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;30&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">sayHi</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:slategray">//&quot;Hi. I am Wayne, 30 years old.&quot;</span></code></div></pre>
<p>I tried to implement chaining method with similar syntax as jQuery. I didn&#x27;t export class, but export $() function which create instance of the fluent interface class, and return method of the class.</p>
<pre><div style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-javascript" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">$</span><span class="token" style="color:#999">(</span><span class="token parameter">query</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token control-flow" style="color:#07a">return</span><span> neoQuery</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">selectQuery</span><span class="token" style="color:#999">(</span><span>query</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token" style="color:#DD4A68">NeoQuery</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token" style="color:#DD4A68">constructor</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">element</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span>
</span>
<span>  </span><span class="token" style="color:#DD4A68">selectQuery</span><span class="token" style="color:#999">(</span><span class="token parameter">query</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">const</span><span> newElement </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token dom" style="color:#e90">document</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">querySelectorAll</span><span class="token" style="color:#999">(</span><span>query</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">element</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> newElement</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span>
</span>
<span>  </span><span class="token" style="color:#DD4A68">addClass</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token spread" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">...</span><span>
</span><span>    </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">element</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token spread" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">...</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span>
</span>
<span>  </span><span class="token" style="color:#DD4A68">appendTo</span><span class="token" style="color:#999">(</span><span class="token parameter">query</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token spread" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">...</span><span>
</span><span>    </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">element</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token spread" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">...</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span>
</span><span>  </span><span class="token spread" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">...</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#DD4A68">$</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;#textNode&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">addClass</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;myClass&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">appendTo</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;#someDiv&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span></code></div></pre>
<hr/>
<h2>$()</h2>
<p>The function, $(), is to create new instance, and start chaining methods. It has three features.</p>
<pre><div style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-javascript" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#DD4A68">$</span><span class="token" style="color:#999">(</span><span>callback</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:slategray">// Binds a function to be executed when the DOM has finished loading.</span><span>
</span><span></span><span class="token" style="color:slategray">// It doesn&#x27;t chain methods.</span><span>
</span><span></span><span class="token" style="color:slategray">// ex) $(()=&gt;{console.log(&quot;ready&quot;)})</span><span>
</span>
<span></span><span class="token" style="color:#DD4A68">$</span><span class="token" style="color:#999">(</span><span>selector</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:slategray">// Selects DOM elements with a CSS selector</span><span>
</span><span></span><span class="token" style="color:slategray">// ex) $( &quot;div.foo&quot; ).---</span><span>
</span>
<span></span><span class="token" style="color:#DD4A68">$</span><span class="token" style="color:#999">(</span><span>html</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:slategray">//Creates DOM elements from the provided string of raw HTML.</span><span>
</span><span></span><span class="token" style="color:slategray">// ex) $(&quot;&lt;div&gt;test&lt;/div&gt;&quot;).---</span></code></div></pre>
<hr/>
<h2>Methods</h2>
<p>I made all methods (except $()), have only one feature. It is to avoid unnecessary logic to categorize arguments for running different feature in one methods, and has more intuitive interface.</p>
<pre><div style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-javascript" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// jQuery</span><span>
</span><span></span><span class="token" style="color:#DD4A68">attr</span><span class="token" style="color:#999">(</span><span>attributeName</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Get the value of attributes</span><span>
</span><span></span><span class="token" style="color:#DD4A68">attr</span><span class="token" style="color:#999">(</span><span>attributeName</span><span class="token" style="color:#999">,</span><span> value</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Set attributes</span><span>
</span>
<span></span><span class="token" style="color:slategray">// neoQuery</span><span>
</span><span></span><span class="token" style="color:#DD4A68">attr</span><span class="token" style="color:#999">(</span><span>attributeName</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Get the value of an attributes</span><span>
</span><span></span><span class="token" style="color:#DD4A68">addAttr</span><span class="token" style="color:#999">(</span><span>attributeName</span><span class="token" style="color:#999">,</span><span> value</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Set attributes</span></code></div></pre>
<hr/>
<h2>Other features</h2>
<hr/>
<h2>References</h2>
<ul>
<li><a href="http://jquery.com/">&quot;jQuery: The write less, do more, JavaScript library&quot;</a></li>
<li><a href="https://www.martinfowler.com/bliki/FluentInterface.html">Martin Fowler, &quot;FluentInterface&quot;</a></li>
</ul></div></section><footer class="layout_footer__2KiKH">(C) <!-- -->2021<!-- -->. Wonjun Choi. All rights reserved.</footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontMatter":{"title":"NeoQuery, the simplified jQuery","date":"Sep 1, 2021","tag":"js-library,project","excerpt":"Amet reprehenderit mollit qui Lorem cupidatat adipisicing.","cover_image":"/images/posts/neoquery.png"},"content":"\r\n# NeoQuery, the simplified jQuery\r\n\r\njQuery, which used to be a market-dominant library, is getting less attention in 2021. It is not an attractive option for new projects anymore, but legacy. Most browsers support web standards, and JavaScript improved a lot with ES6 update. We got fancy api like querySelectorAll() instead of getElementById(), and it is as convenient as jQuery methods.\r\n\r\nIn addition, jQuery is too heavy. In modern JS ecosystem, modularized library is recommend to use. jQuery, however, does have too many features. It helps Dom manipulation, CSS styling, event handling, animation, and ajax. They could be covered with modern JavaScript, or sometimes other modularized library like Axios.\r\n\r\nBut I still like jQuery syntax. Especially its way to manipulate DOM with chaining method is still attractive. So I made a library for DOM manipulation with jQuery method. I didn't create ajax and animation features, and minimize styling and event handling features. It is NeoQuery.\r\n\r\n---\r\n\r\n## Fluent Interface\r\n\r\nA fluent interface is normally implemented by using method chaining to implement method cascading. jQuery is one of the most representative examples of use.\r\n\r\n```javascript\r\n//jQuery example\r\n$(\"#textNode\").css(\"color\", \"red\").appendTo(\"#someDiv\");\r\n```\r\n\r\nIt is implemented by having each method return the object to which it is attached, often referred to as \"this\". Stated more abstractly, a fluent interface relays the instruction context of a subsequent call in method chaining, where generally the context is\r\n\r\n- Defined through the return value of a called method\r\n- Self-referential, where the new context is equivalent to the last context\r\n- Terminated through the return of a void context\r\n\r\n```javascript\r\nClass Person{\r\n    constructor(){\r\n        this.name;\r\n        this.age;\r\n    }\r\n\r\n    setName(name) {\r\n        this.name = name\r\n        return this\r\n    }\r\n\r\n    setAge(age) {\r\n        this.age = age\r\n        return this\r\n    }\r\n\r\n    sayHi() {\r\n        console.log(`Hi. I am ${this.name}, ${age} years old.`)\r\n        return this\r\n    }\r\n}\r\n\r\nnew Person().setName(\"Wayne\").setAge(\"30\").sayHi();\r\n//\"Hi. I am Wayne, 30 years old.\"\r\n```\r\n\r\nI tried to implement chaining method with similar syntax as jQuery. I didn't export class, but export $() function which create instance of the fluent interface class, and return method of the class.\r\n\r\n```javascript\r\nexport default function $(query) {\r\n  return neoQuery.selectQuery(query);\r\n}\r\n\r\nclass NeoQuery {\r\n  constructor() {\r\n    this.element;\r\n  }\r\n\r\n  selectQuery(query) {\r\n    const newElement = document.querySelectorAll(query);\r\n    this.element = newElement;\r\n    return this;\r\n  }\r\n\r\n  addClass() {\r\n    ...\r\n    this.element = ...\r\n    return this;\r\n  }\r\n\r\n  appendTo(query) {\r\n    ...\r\n    this.element = ...\r\n    return this;\r\n  }\r\n  ...\r\n}\r\n\r\n$(\"#textNode\").addClass(\"myClass\").appendTo(\"#someDiv\");\r\n```\r\n\r\n---\r\n\r\n## $()\r\n\r\nThe function, $(), is to create new instance, and start chaining methods. It has three features.\r\n\r\n```javascript\r\n$(callback);\r\n// Binds a function to be executed when the DOM has finished loading.\r\n// It doesn't chain methods.\r\n// ex) $(()=\u003e{console.log(\"ready\")})\r\n\r\n$(selector);\r\n// Selects DOM elements with a CSS selector\r\n// ex) $( \"div.foo\" ).---\r\n\r\n$(html);\r\n//Creates DOM elements from the provided string of raw HTML.\r\n// ex) $(\"\u003cdiv\u003etest\u003c/div\u003e\").---\r\n```\r\n\r\n---\r\n\r\n## Methods\r\n\r\nI made all methods (except $()), have only one feature. It is to avoid unnecessary logic to categorize arguments for running different feature in one methods, and has more intuitive interface.\r\n\r\n```javascript\r\n// jQuery\r\nattr(attributeName); // Get the value of attributes\r\nattr(attributeName, value); // Set attributes\r\n\r\n// neoQuery\r\nattr(attributeName); // Get the value of an attributes\r\naddAttr(attributeName, value); // Set attributes\r\n```\r\n\r\n---\r\n\r\n## Other features\r\n\r\n---\r\n\r\n## References\r\n\r\n- [\"jQuery: The write less, do more, JavaScript library\"](http://jquery.com/)\r\n- [Martin Fowler, \"FluentInterface\"](https://www.martinfowler.com/bliki/FluentInterface.html)\r\n"},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"neoquery_the_simplified_jquery"},"buildId":"sLsnVHm4E6bG3kHgTY_x-","assetPrefix":"https://waynethebb.github.io","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>