<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="https://waynechoi.dev/_next/static/css/4698f8d7382a455a8b5a.css" as="style"/><link rel="stylesheet" href="https://waynechoi.dev/_next/static/css/4698f8d7382a455a8b5a.css" data-n-g=""/><link rel="preload" href="https://waynechoi.dev/_next/static/css/2704e21105afcaafd3da.css" as="style"/><link rel="stylesheet" href="https://waynechoi.dev/_next/static/css/2704e21105afcaafd3da.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="https://waynechoi.dev/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="https://waynechoi.dev/_next/static/chunks/webpack-c6b64c99608fd9e03712.js" defer=""></script><script src="https://waynechoi.dev/_next/static/chunks/framework-44ddc888f4db0c68c97f.js" defer=""></script><script src="https://waynechoi.dev/_next/static/chunks/main-8af3309d1a9bc71624bc.js" defer=""></script><script src="https://waynechoi.dev/_next/static/chunks/pages/_app-48b69efe9e5a5e13dc29.js" defer=""></script><script src="https://waynechoi.dev/_next/static/chunks/pages/index-76fb32802f506b26aa3c.js" defer=""></script><script src="https://waynechoi.dev/_next/static/hxToAhvIeysU34SHT-_94/_buildManifest.js" defer=""></script><script src="https://waynechoi.dev/_next/static/hxToAhvIeysU34SHT-_94/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="layout_container__1ROar"><header class="layout_header__MPs9E"><div class="header_container__2Vvjg"><div class="header_header__3lGRs"><button class="header_mobileMenuButton__1vVY8"><img alt="menu" src="https://waynechoi.dev/images/menu.svg"/></button><a class="header_name__2PEvs" href="/">WayneChoi.dev</a><ul class="header_list__2sooW"><li class="header_item_list_item_active__3nSjh"><a href="/">HOME</a></li><li class="header_item_list_item__33J-y"><a href="/about">ABOUT</a></li><li class="header_item_list_item__33J-y"><a href="/portfolio">PORTFOLIO</a></li></ul><div class="header_searchBar__3VAZB"><form class="search_bar_container__2559w"><input type="text" id="keyword" placeholder="keywords..." required=""/><button type="submit"><img alt="search" src="https://waynechoi.dev/images/search.svg"/></button></form></div><button class="header_mobileSearchButton__1r9xs"><img alt="search" src="https://waynechoi.dev/images/search.svg"/></button></div></div></header><section class="layout_contents__wGaub"><div class="index_container__3XRMM"><div class="index_canvasWrapper__1KVdL"><canvas class="index_canvas__BH3sG"></canvas></div><p class="index_bonVoyage__pk6or">Bon Voyage!</p><div class="index_mobileTag__3RS75"><ul class="tag_list_container__pMW4g"><p class="tag_list_subject__2rFwQ">Tag</p><li class="tag_list_item_container__1KmRN"><span class="tag_list_item_inactive__36OPE">Deploy<!-- --> (<!-- -->1<!-- -->) </span></li><li class="tag_list_item_container__1KmRN"><span class="tag_list_item_inactive__36OPE">JS Library<!-- --> (<!-- -->1<!-- -->) </span></li><li class="tag_list_item_container__1KmRN"><span class="tag_list_item_inactive__36OPE">JavaScript<!-- --> (<!-- -->2<!-- -->) </span></li><li class="tag_list_item_container__1KmRN"><span class="tag_list_item_inactive__36OPE">React<!-- --> (<!-- -->1<!-- -->) </span></li></ul></div><div class="index_blogContainer__2S86w"><div class="index_postList__ue-YK"><div class="post_list_container__31KG5"><div class="post_card_container__UhzDn"><a href="/build_next.js_blog_and_deploy_to_github_pages"><div class="post_card_header__1GD9J"><span class="post_card_date__3I7F-">Sep 10, 2021</span><span class="post_card_tagWrapper__1x75t"><span class="post_card_tag__t8NSx">#<!-- -->React</span><span class="post_card_tag__t8NSx">#<!-- -->Deploy</span></span></div><h1>Build Next.js blog and deploy to Github Pages</h1><p>How I build static blog site with Next.js, and general configuration to deploy to Github Pages in this post... </p></a></div><div class="post_card_container__UhzDn"><a href="/variable_declaration_in_javascript_modules"><div class="post_card_header__1GD9J"><span class="post_card_date__3I7F-">Sep 2, 2021</span><span class="post_card_tagWrapper__1x75t"><span class="post_card_tag__t8NSx">#<!-- -->JavaScript</span></span></div><h1>Variable declaration in JavaScript Modules</h1><p>In module JavaScript, however, &quot;this&quot; refers to &quot;undefined&quot; in the top level context... </p></a></div><div class="post_card_container__UhzDn"><a href="/neoquery_the_simplified_jquery"><div class="post_card_header__1GD9J"><span class="post_card_date__3I7F-">Sep 1, 2021</span><span class="post_card_tagWrapper__1x75t"><span class="post_card_tag__t8NSx">#<!-- -->JS Library</span><span class="post_card_tag__t8NSx">#<!-- -->JavaScript</span></span></div><h1>NeoQuery, the simplified jQuery</h1><p>I made a DOM manipulation library, and I was highly motivated from jQuery... </p></a></div></div></div><div class="index_tag__1nG4O"><ul class="tag_list_container__pMW4g"><p class="tag_list_subject__2rFwQ">Tag</p><li class="tag_list_item_container__1KmRN"><span class="tag_list_item_inactive__36OPE">Deploy<!-- --> (<!-- -->1<!-- -->) </span></li><li class="tag_list_item_container__1KmRN"><span class="tag_list_item_inactive__36OPE">JS Library<!-- --> (<!-- -->1<!-- -->) </span></li><li class="tag_list_item_container__1KmRN"><span class="tag_list_item_inactive__36OPE">JavaScript<!-- --> (<!-- -->2<!-- -->) </span></li><li class="tag_list_item_container__1KmRN"><span class="tag_list_item_inactive__36OPE">React<!-- --> (<!-- -->1<!-- -->) </span></li></ul></div></div></div></section><footer class="layout_footer__2KiKH">(C) <!-- -->2021<!-- -->. Wonjun Choi. All rights reserved.</footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"posts":[{"slug":"build_next.js_blog_and_deploy_to_github_pages","title":"Build Next.js blog and deploy to Github Pages","date":"Sep 10, 2021","tag":["React","Deploy"],"excerpt":"How I build static blog site with Next.js, and general configuration to deploy to Github Pages in this post... ","content":"\r\nNext.js was known as a React framework to support server-side rendering (SSR) with zero config(if not necessary). After recent updates, it supports static generation (SSG) well, too.\r\n\r\nTo build my own blog, I got two options for React frameworks, one was Next.js, and other was Gatsby. I want to export my blog to static files, and Gatsby is specialized for SSG though, I choose Next.js. There was no reason for me to choose new tech stack, because I already tried Next.js before(for SSR), and I heard SSG in Next.js perform well.\r\n\r\nI deployed the static files of my blog to Github Pages, and I needed some configuration. I would record how I build static blog site with Next.js, and general configuration to deploy to Github Pages in this post.\r\n\r\n---\r\n\r\n## Table of Contents\r\n\r\n- Write posts with markdown format\r\n- Get slugs from markdown files\r\n- define path list from slugs\r\n- Parse markdown to html\r\n- Configuration\r\n\r\nMy code is modularized though, I put all code together in this post to make it easy to explain.\r\n\r\nI will skip to import all libraries. The dependency is blow.\r\n\r\n```javascript\r\n \"dependencies\": {\r\n    \"gh-pages\": \"^3.2.3\",\r\n    \"gray-matter\": \"^4.0.3\",\r\n    \"next\": \"^11.1.2\",\r\n    \"react\": \"17.0.2\",\r\n    \"react-dom\": \"17.0.2\",\r\n    \"react-markdown\": \"^6.0.3\",\r\n    \"react-syntax-highlighter\": \"^15.4.4\"\r\n  }\r\n```\r\n\r\n---\r\n\r\n## Get post list from markdown files\r\n\r\n```javascript\r\n\r\nexport async function getStaticProps() {\r\n  const files = fs.readdirSync(path.join(\"posts\"));\r\n  // read file names from the directory\r\n  // It returns an array\r\n\r\n  const posts = files.map((filename) =\u003e {\r\n\r\n    const slug = filename.replace(\".md\", \"\");\r\n    const markdownWithMeta = fs.readFileSync(\r\n      path.join(\"posts\", filename),\r\n      \"utf-8\"\r\n    );\r\n    const { data: frontMatter, content } = matter(markdownWithMeta);\r\n\r\n    return {\r\n      slug,\r\n      ...frontMatter\r\n    };\r\n  });\r\n  // iterate files to get slug, and parse frontMatter of markdown\r\n  // use \"matter\" library to parse markdown\r\n\r\n  return {\r\n    props: {\r\n      posts,\r\n    },\r\n  };\r\n  // return props to React component\r\n}\r\n\r\nexport default function Index({ posts }) {\r\n    ...\r\n}\r\n```\r\n\r\nNow we got an array including slug of each posts. We can route pages with those slugs.\r\n\r\n---\r\n\r\n## Get static path from slug\r\n\r\nIf a page has dynamic routes and uses getStaticProps it needs to define a list of paths that have to be rendered to HTML at build time.\r\n\r\nIf you export an async function called getStaticPaths from a page that uses dynamic routes, Next.js will statically pre-render all the paths specified by getStaticPaths.\r\n\r\n```javascript\r\n// [slug].jsx\r\n// https://localhost:3000/slug\r\n\r\nexport async function getStaticPaths() {\r\n  const files = fs.readdirSync(path.join(\"posts\"));\r\n\r\n  const paths = files.map((filename) =\u003e ({\r\n    params: {\r\n      slug: filename.replace(\".md\", \"\"),\r\n    },\r\n  }));\r\n\r\n  return {\r\n    paths,\r\n    fallback: true,\r\n  };\r\n}\r\n// define a list of paths\r\n```\r\n\r\n---\r\n\r\n## Parse markdown to html and render\r\n\r\n```javascript\r\n// [slug].jsx\r\n\r\n...\r\n\r\nexport async function getStaticProps({ params: { slug } }) {\r\n  const markdownWithMeta = fs.readFileSync(\r\n    path.join(\"posts\", slug + \".md\"),\r\n    \"utf-8\"\r\n  );\r\n// get a single markdown file with a slug\r\n\r\n  const { data: frontMatter, content } = matter(markdownWithMeta);\r\n// parse the markdown file\r\n\r\n  return {\r\n    props: { frontMatter, content },\r\n  };\r\n}\r\n// return props to a React Component\r\n// content is html\r\n\r\nexport default function Blog({ frontMatter: { title }, content}) {\r\n  return (\r\n    \u003cdiv\u003e\r\n      \u003ch1\u003e{title}\u003c/h1\u003e\r\n      \u003cdiv className={styles.content}\u003e\r\n        \u003cReactMarkdown\u003e{content}\u003c/ReactMarkdown\u003e\r\n      \u003c/div\u003e\r\n    \u003c/div\u003e\r\n  );\r\n}\r\n// Render html with \"markdown\" library\r\n```\r\n\r\n---\r\n\r\n## Configuration\r\n\r\nTo generate static site, and deploy to CDN, we can set up an asset Prefix and configure the CDN's origin to resolve to the domain that Next.js is hosted on.\r\n\r\n```javascript\r\n// next.config.js\r\n\r\nconst isProd = process.env.NODE_ENV === \"production\";\r\n\r\nmodule.exports = {\r\n  // Use the CDN in production and localhost for development.\r\n  assetPrefix: isProd ? \"https://cdn.mydomain.com\" : \"\",\r\n};\r\n```\r\n\r\nAnd I imported the assetPrest to fix image links between pages.\r\n\r\n```javascript\r\n// _app.js\r\n\r\nimport { assetPrefix } from \"../next.config\";\r\n\r\nfunction MyApp({ Component, pageProps }) {\r\n  const date = new Date();\r\n  return (\r\n      \u003cComponent {...pageProps} prefix={assetPrefix} /\u003e\r\n  );\r\n}\r\nexport default MyApp;\r\n\r\n// other pages\r\n\u003cimg src={prefix + \"imgSrc\"}\u003e\r\n```\r\n\r\n---\r\n\r\n## References\r\n\r\n- [https://nextjs.org/](https://nextjs.org/)\r\n- [hhttps://dev.to/jameswallis/](https://dev.to/jameswallis/deploying-a-next-js-app-to-github-pages-24pn)\r\n"},{"slug":"variable_declaration_in_javascript_modules","title":"Variable declaration in JavaScript Modules","date":"Sep 2, 2021","tag":["JavaScript"],"excerpt":"In module JavaScript, however, \"this\" refers to \"undefined\" in the top level context... ","content":"\r\nThis study started with only a single line of code I did not understand.\r\n\r\n```javascript\r\n// type = \"module\"\r\nconsole.log(this); // undefined\r\n```\r\n\r\n---\r\n\r\n## Where the hell is \"window\"?\r\n\r\nIn the global execution context (outside of any function), \"this\" refers to the global object. If its runtime environment is a browser, it is \"window\". In module JavaScript, however, \"this\" refers to \"undefined\" in the top level context.\r\n\r\nModules are imported into the scope of single scripts. They cannot be called from global scope.\r\n\r\nModules have a lexical top-level scope. This means that for example, running var foo = 42; within a module does not create a global variable named foo, accessible through window.foo in a browser, although that would be the case in a classic script.\r\n\r\nSimilarly, the this within modules does not refer to the global this, and instead is undefined.\r\n\r\n---\r\n\r\n## Variables Declaration\r\n\r\nAll variables in JavaScript is properties of objects, and a global variable is assigned to a property of global object.\r\n\r\n```javascript\r\nvar a = \"hi\";\r\nconsole.log(a); // hi\r\nconsole.log(window.a); // hi\r\nconsole.log(this.a); // hi\r\n```\r\n\r\nWhat object is variables, declared in top-level scope of modules, assigned to?\r\n\r\nWhen variables is declared, it is assigned to a property of LexicalEnvironment component in execution context. The variables in top-level scope of modules are also assigned to LexicalEnvironment like any other execution contexts, but not global object like global variable. Only global variable is assigned to the global object, and then LexicalEnvironment refer the global object.\r\n\r\n---\r\n\r\n## \"var\" and \"let\"\r\n\r\nFor both modules and commonjs, variables declared suing the \"let\", and constants are not assigned to a global property, but only LexicalEnvironment.\r\n\r\n```javascript\r\nlet a = \"hi\";\r\nconsole.log(a); // hi\r\nconsole.log(window.a); // undefined\r\nconsole.log(this.a); // undefined\r\n```\r\n\r\n---\r\n\r\n## References\r\n\r\n- [this - JavaScript | MDN](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Operators/this)\r\n- [JavaScript modules - JavaScript | MDN](https://developer.mozilla.org/docs/Web/JavaScript/Guide/Modules)\r\n- [JavaScript modules · V8](https://v8.dev/features/modules#mjs)\r\n"},{"slug":"neoquery_the_simplified_jquery","title":"NeoQuery, the simplified jQuery","date":"Sep 1, 2021","tag":["JS Library","JavaScript"],"excerpt":"I made a DOM manipulation library, and I was highly motivated from jQuery... ","content":"\r\njQuery, which used to be a market-dominant library, is getting less attention in 2021. It is not an attractive option for new projects anymore, but legacy. Most browsers support web standards, and JavaScript improved a lot with ES6 update. We got fancy api like querySelectorAll() instead of getElementById(), and it is as convenient as jQuery methods.\r\n\r\nIn addition, jQuery is too heavy. In modern JS ecosystem, modularized library is recommend to use. jQuery, however, does have too many features. It helps Dom manipulation, CSS styling, event handling, animation, and ajax. They could be covered with modern JavaScript, or sometimes other modularized library like Axios.\r\n\r\nBut I believe jQuery syntax still works well. Especially its way to manipulate DOM with chaining method is still attractive. So I made a library, which is highly motivated from jQuery, and has similar methods and syntax, to manipulate DOM. It is [NeoQuery.](https://github.com/waynethebb/neoquery)\r\n\r\n---\r\n\r\n## Fluent Interface\r\n\r\nA fluent interface is normally implemented by using method chaining to implement method cascading. jQuery is one of the most representative examples of use.\r\n\r\n```javascript\r\n//jQuery example\r\n$(\"#textNode\").css(\"color\", \"red\").appendTo(\"#someDiv\");\r\n```\r\n\r\nIt is implemented by having each method return the object to which it is attached, often referred to as \"this\". Stated more abstractly, a fluent interface relays the instruction context of a subsequent call in method chaining, where generally the context is\r\n\r\n- Defined through the return value of a called method\r\n- Self-referential, where the new context is equivalent to the last context\r\n- Terminated through the return of a void context\r\n\r\n```javascript\r\nClass Person{\r\n    constructor(){\r\n        this.name;\r\n        this.age;\r\n    }\r\n\r\n    setName(name) {\r\n        this.name = name\r\n        return this\r\n    }\r\n\r\n    setAge(age) {\r\n        this.age = age\r\n        return this\r\n    }\r\n\r\n    sayHi() {\r\n        console.log(`Hi. I am ${this.name}, ${age} years old.`)\r\n        return this\r\n    }\r\n}\r\n\r\nnew Person().setName(\"Wayne\").setAge(\"30\").sayHi();\r\n//\"Hi. I am Wayne, 30 years old.\"\r\n```\r\n\r\nI tried to implement chaining method with similar syntax as jQuery. I didn't export class, but export $() function which create instance of the fluent interface class, and return method of the class.\r\n\r\n```javascript\r\nexport default function $(query) {\r\n  return neoQuery.selectQuery(query);\r\n}\r\n\r\nclass NeoQuery {\r\n  constructor() {\r\n    this.element;\r\n  }\r\n\r\n  selectQuery(query) {\r\n    const newElement = document.querySelectorAll(query);\r\n    this.element = newElement;\r\n    return this;\r\n  }\r\n\r\n  addClass() {\r\n    ...\r\n    this.element = ...\r\n    return this;\r\n  }\r\n\r\n  appendTo(query) {\r\n    ...\r\n    this.element = ...\r\n    return this;\r\n  }\r\n  ...\r\n}\r\n\r\n$(\"#textNode\").addClass(\"myClass\").appendTo(\"#someDiv\");\r\n```\r\n\r\n---\r\n\r\n## $()\r\n\r\nThe function, $(), is to create new instance, and start chaining methods. It has three features.\r\n\r\n```javascript\r\n$(callback);\r\n// Binds a function to be executed when the DOM has finished loading.\r\n// It doesn't chain methods.\r\n// ex) $(()=\u003e{console.log(\"ready\")})\r\n\r\n$(selector);\r\n// Selects DOM elements with a CSS selector\r\n// ex) $( \"div.foo\" ).---\r\n\r\n$(html);\r\n//Creates DOM elements from the provided string of raw HTML.\r\n// ex) $(\"\u003cdiv\u003etest\u003c/div\u003e\").---\r\n```\r\n\r\n---\r\n\r\n## Methods\r\n\r\nI made all methods (except $()), have only one feature. It is to avoid unnecessary logic to categorize arguments for running different feature in one methods, and has more intuitive interface.\r\n\r\n```javascript\r\n// jQuery\r\nattr(attributeName); // Get the value of attributes\r\nattr(attributeName, value); // Set attributes\r\n\r\n// neoQuery\r\nattr(attributeName); // Get the value of an attributes\r\naddAttr(attributeName, value); // Set attributes\r\n```\r\n\r\n---\r\n\r\n## Other features\r\n\r\nI didn't create ajax and animation features, and minimize styling and event handling features. I intended to make this library as light as possible.\r\n\r\n### Styling\r\n\r\n- addCss(propertyName, value)\r\n- removeCss(propertyName)\r\n- show()\r\n- hide()\r\n\r\nI believe in-line styling need to be rejected, so I did not implement other styling methods. Unlike jQuery, those method can get only one property name as an argument.(\"css()\" the jQuery method can get object for css properties)\r\n\r\n\"show()\" and \"hide()\" methods was only exception. I think those methods are more like DOM control, and it does not conflict against other style properties.\r\n\r\n### Event\r\n\r\n- on(event, callback)\r\n- one(event, callback)\r\n- off(event, callback)\r\n\r\nI did not make other features to create event listener, but methods we can use with the browser event types.\r\n\r\n---\r\n\r\n## References\r\n\r\n- [\"jQuery: The write less, do more, JavaScript library\"](http://jquery.com/)\r\n- [Martin Fowler, \"FluentInterface\"](https://www.martinfowler.com/bliki/FluentInterface.html)\r\n"}]},"__N_SSG":true},"page":"/","query":{},"buildId":"hxToAhvIeysU34SHT-_94","assetPrefix":"https://waynechoi.dev","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>